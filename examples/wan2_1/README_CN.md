# å¼€ç®±å³ç”¨ï¼Wan2.1è§†é¢‘ç”Ÿæˆæ¨¡å‹MindSporeé€‚é…å¼€æºï¼Œæ˜‡è…¾ç¡¬ä»¶åŠ é€ŸåŠ æŒ

åœ¨AIè§†é¢‘ç”Ÿæˆé¢†åŸŸï¼ŒWan2.1ä½œä¸ºæœ€æ–°çš„è§†è§‰ç”Ÿæˆæ¨¡å‹ï¼Œèƒ½å¤Ÿæ ¹æ®æ–‡æœ¬ã€å›¾åƒæˆ–å…¶ä»–æ§åˆ¶ä¿¡å·ç”Ÿæˆè§†é¢‘ï¼Œä»¥å…¶å“è¶Šè¡¨ç°å¤‡å—å…³æ³¨ã€‚åœ¨VBenchè¯„æµ‹ä¸­ï¼ŒWan2.1ä»¥86.22%çš„æ€»åˆ†ï¼ŒåŠ›å‹Soraã€HunyuanVideoç­‰ä¸»æµæ¨¡å‹ï¼Œæ‘˜å¾—æ¡‚å† ã€‚

MindSporeå›¢é˜Ÿç°å·²å®Œæˆå¯¹Wan2.1çš„é€‚é…ï¼Œå¹¶å°†å…¶å¼€æºè‡³[MindOne]((https://github.com/mindspore-lab/mindone)) GitHubä»“åº“ï¼Œç»“åˆæ˜‡è…¾ç¡¬ä»¶åŠ é€Ÿï¼Œä¸ºå¼€å‘è€…æä¾›é«˜æ•ˆä½“éªŒã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åŸºäºæ˜‡æ€MindSporeå’Œå•æœºAtlas 800T A2ï¼Œå®Œæ•´å®ç°Wan2.1è§†é¢‘ç”Ÿæˆçš„æ“ä½œæµç¨‹ã€‚

---

## æ•ˆæœå±•ç¤ºï¼šåˆ›æ„ä¸€è§¦å³å‘

å…ˆåˆ«æ€¥ç€çœ‹ä»£ç ï¼Œæ¥çœ‹çœ‹ Wan2.1 çš„â€œä½œå“â€ï¼š

1. **æ–‡ç”Ÿè§†é¢‘**ï¼š  

https://github.com/user-attachments/assets/f6705d28-7755-447b-a256-6727f66d693b

```text
prompt: A sepia-toned vintage photograph depicting a whimsical bicycle race featuring several dogs wearing goggles and tiny cycling outfits. The canine racers, with determined expressions and blurred motion, pedal miniature bicycles on a dusty road. Spectators in period clothing line the sides, adding to the nostalgic atmosphere. Slightly grainy and blurred, mimicking old photos, with soft side lighting enhancing the warm tones and rustic charm of the scene. 'Bicycle Race' captures this unique moment in a medium shot, focusing on both the racers and the lively crowd.
```

https://github.com/user-attachments/assets/1e1da53a-9112-4fc3-bb8e-b458497c4806

```text
prompt: Film quality, professional quality, rich details. The video begins to show the surface of a pond, and the camera slowly zooms in to a close-up. The water surface begins to bubble, and then a blonde woman is seen coming out of the lotus pond soaked all over, showing the subtle changes in her facial expression, creating a dreamy atmosphere.
```

https://github.com/user-attachments/assets/34e4501f-a207-40bb-bb6c-b162ff6505b0

```text
prompt: Two anthropomorphic cats wearing boxing suits and bright gloves fiercely battled on the boxing ring under the spotlight. Their muscles are tight, displaying the strength and agility of professional boxers. A spotted dog judge stood aside. The animals in the audience around cheered and cheered, adding a lively atmosphere to the competition. The cat's boxing movements are quick and powerful, with its paws tracing blurry trajectories in the air. The screen adopts a dynamic blur effect, close ups, and focuses on the intense confrontation on the boxing ring.
```

https://github.com/user-attachments/assets/aceda253-78a2-4fa5-9edc-83f035c7c2ea

```text
prompt: Sports photography full of dynamism, several motorcycles fiercely compete on the loess flying track, their wheels rolling up the dust in the sky. The motorcyclist is wearing professional racing clothes. The camera uses a high-speed shutter to capture moments, follows from the side and rear, and finally freezes in a close-up of a motorcycle, showcasing its exquisite body lines and powerful mechanical beauty, creating a tense and exciting racing atmosphere. Close up dynamic perspective, perfectly presenting the visual impact of speed and power.
```

https://github.com/user-attachments/assets/c00ca7b8-5e05-4776-8c72-ae19e6bd44f5

```text
prompt: ç”µå½±ç”»è´¨ï¼Œä¸“ä¸šè´¨é‡ï¼Œä¸°å¯Œç»†èŠ‚ã€‚ä¸€åå®‡èˆªå‘˜èº«ç©¿å¤ªç©ºæœï¼Œé¢æœé•œå¤´éª‘ç€ä¸€åŒ¹æœºæ¢°é©¬åœ¨ç«æ˜Ÿè¡¨é¢é©°éª‹ã€‚çº¢è‰²çš„è’å‡‰åœ°è¡¨å»¶ä¼¸è‡³è¿œæ–¹ï¼Œç‚¹ç¼€ç€å·¨å¤§çš„é™¨çŸ³å‘å’Œå¥‡ç‰¹çš„å²©çŸ³ç»“æ„ã€‚æœºæ¢°é©¬çš„æ­¥ä¼ç¨³å¥ï¼Œæ‰¬èµ·å¾®å¼±çš„å°˜åŸƒï¼Œå±•ç°å‡ºæœªæ¥ç§‘æŠ€ä¸åŸå§‹æ¢ç´¢çš„å®Œç¾ç»“åˆã€‚å®‡èˆªå‘˜æ‰‹æŒæ“æ§è£…ç½®ï¼Œç›®å…‰åšå®šï¼Œä»¿ä½›æ­£åœ¨å¼€è¾Ÿäººç±»çš„æ–°ç–†åŸŸã€‚èƒŒæ™¯æ˜¯æ·±é‚ƒçš„å®‡å®™å’Œè”šè“çš„åœ°çƒï¼Œç”»é¢æ—¢ç§‘å¹»åˆå……æ»¡å¸Œæœ›ï¼Œè®©äººä¸ç¦ç•…æƒ³æœªæ¥çš„æ˜Ÿé™…ç”Ÿæ´»ã€‚
```

2. **å›¾ç”Ÿè§†é¢‘**

https://github.com/user-attachments/assets/d37bf480-595e-4a41-95f8-acbc421b7428

```text
prompt: Summer beach vacation style, a white cat wearing sunglasses sits on a surfboard. The fluffy-furred feline gazes directly at the camera with a relaxed expression. Blurred beach scenery forms the background featuring crystal-clear waters, distant green hills, and a blue sky dotted with white clouds. The cat assumes a naturally relaxed posture, as if savoring the sea breeze and warm sunlight. A close-up shot highlights the feline's intricate details and the refreshing atmosphere of the seaside.
```
   
çŒ«å’ªé‚£é…·èŒçš„è¡¨æƒ…ç»äº†! 

è¿™äº›éƒ½æ˜¯åŸºäºMindSporeå’Œæ˜‡è…¾910*ç¡¬ä»¶è·‘å‡ºæ¥çš„ï¼Œæ•ˆæœå¦‚ä½•ï¼Ÿæ¥åŠ¨æ‰‹è¯•è¯•ï¼Œç”Ÿæˆä½ çš„ä¸“å±è§†é¢‘å§ï¼


---

## å¿«é€Ÿä¸Šæ‰‹ï¼š5åˆ†é’Ÿç©è½¬Wan2.1

### ç¯å¢ƒå‡†å¤‡

- **MindSpore**ï¼š2.5.0
- **CANN**:  8.0.0.beta1 

### å®‰è£…ä¾èµ–

```
git clone https://github.com/mindspore-lab/mindone
cd mindone/examples/wan2_1

pip install -r requirements.txt
```

### æ¨¡å‹ä¸‹è½½

| æ¨¡å‹ |                       ä¸‹è½½é“¾æ¥    |   è¯´æ˜   |
| --------------|-------------------------------------------------------------------------------|-------------------------------|
| T2V-14B       |      ğŸ¤— [Huggingface](https://huggingface.co/Wan-AI/Wan2.1-T2V-14B)      ğŸ¤– [ModelScope](https://www.modelscope.cn/models/Wan-AI/Wan2.1-T2V-14B)          | Supports both 480P and 720P
| I2V-14B-720P  |      ğŸ¤— [Huggingface](https://huggingface.co/Wan-AI/Wan2.1-I2V-14B-720P)    ğŸ¤– [ModelScope](https://www.modelscope.cn/models/Wan-AI/Wan2.1-I2V-14B-720P)     | Supports 720P
| I2V-14B-480P  |      ğŸ¤— [Huggingface](https://huggingface.co/Wan-AI/Wan2.1-I2V-14B-480P)    ğŸ¤– [ModelScope](https://www.modelscope.cn/models/Wan-AI/Wan2.1-I2V-14B-480P)      | Supports 480P
| T2V-1.3B      |      ğŸ¤— [Huggingface](https://huggingface.co/Wan-AI/Wan2.1-T2V-1.3B)     ğŸ¤– [ModelScope](https://www.modelscope.cn/models/Wan-AI/Wan2.1-T2V-1.3B)         | Supports 480P

ä» Hugging Face æˆ– ModelScope ä¸‹æ‰€éœ€çš„æ¨¡å‹ï¼Œå¦‚ï¼š

```
huggingface-cli download Wan-AI/Wan2.1-T2V-14B --local-dir ./Wan2.1-T2V-14B
```

### æ–‡æœ¬ç”Ÿæˆè§†é¢‘ï¼ˆT2Vï¼‰

æ”¯æŒ1.3Bå’Œ14Bæ¨¡å‹ï¼Œåˆ†è¾¨ç‡å¯é€‰480Pæˆ–720Pã€‚

- å•å¡æ¨ç†ï¼š

```
python generate.py  \
    --task t2v-1.3B \
    --size 832*480 \
    --ckpt_dir ./Wan2.1-T2V-1.3B \
    --sample_shift 8 \
    --sample_guide_scale 6 \
    --prompt "Two anthropomorphic cats in comfy boxing gear and bright gloves fight intensely on a spotlighted stage."
```

å¯è‡ªå®šä¹‰promptï¼Œç”Ÿæˆ480Pä¸ªæ€§åŒ–è§†é¢‘ï¼Œé€šè¿‡è°ƒå°`sample_guide_scale`å‚æ•°å¢å¼ºè§†é¢‘ç”»é¢è´¨é‡ï¼Œæˆ–è€…è°ƒå¤§è¯¥å‚æ•°ä»¥å¢å¼ºè§†é¢‘-æ–‡æœ¬åŒ¹é…ç¨‹åº¦ã€‚

- å¤šå¡åŠ é€Ÿï¼š

```
msrun --worker_num=4 --local_worker_num=4 generate.py \
    --task t2v-14B \
    --size 1280*720 \
    --ckpt_dir ./Wan2.1-T2V-14B \
    --dit_zero3 --t5_zero3 --ulysses_sp \
    --prompt "Two anthropomorphic cats in comfy boxing gear and bright gloves fight intensely on a spotlighted stage."
```

å¯å¼€å¯åºåˆ—å¹¶è¡Œå’ŒZero3æ¨¡å‹åˆ‡ç‰‡åŠ é€Ÿ720Pè§†é¢‘ç”Ÿæˆ

### å›¾åƒç”Ÿæˆè§†é¢‘ï¼ˆT2Vï¼‰

æ”¯æŒ14Bæ¨¡å‹ï¼Œåˆ†è¾¨ç‡å¯é€‰480Pæˆ–720Pã€‚

- å•å¡æ¨ç†ï¼š

```
python generate.py \
    --task i2v-14B \
    --size 832*480 \
    --ckpt_dir ./Wan2.1-I2V-14B-480P \
    --image examples/i2v_input.JPG \
    --prompt "Summer beach vacation style, a white cat wearing sunglasses sits on a surfboard. The fluffy-furred feline gazes directly at the camera with a relaxed expression. Blurred beach scenery forms the background featuring crystal-clear waters, distant green hills, and a blue sky dotted with white clouds. The cat assumes a naturally relaxed posture, as if savoring the sea breeze and warm sunlight. A close-up shot highlights the feline's intricate details and the refreshing atmosphere of the seaside."
```

- å¤šå¡åŠ é€Ÿï¼š

```
msrun --worker_num=2 --local_worker_num=2 generate.py \
    --task i2v-14B --size 1280*720 \
    --ckpt_dir ./Wan2.1-I2V-14B-720P \
    --dit_zero3 --t5_zero3 --ulysses_sp \
    --image examples/i2v_input.JPG \
    --prompt "Summer beach vacation style, a white cat wearing sunglasses sits on a surfboard. The fluffy-furred feline gazes directly at the camera with a relaxed expression. Blurred beach scenery forms the background featuring crystal-clear waters, distant green hills, and a blue sky dotted with white clouds. The cat assumes a naturally relaxed posture, as if savoring the sea breeze and warm sunlight. A close-up shot highlights the feline's intricate details and the refreshing atmosphere of the seaside."
```


### æ€§èƒ½å®æµ‹ï¼šæ˜‡è…¾ç¡¬ä»¶åŠ é€Ÿæå‡æ•ˆç‡

åœ¨æ˜‡è…¾910*å’ŒMindSpore2.5.0åŠ¨æ€å›¾æ¨¡å¼ä¸‹çš„æ€§èƒ½æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š

|   æ¨¡å‹  | è§†é¢‘å°ºå¯¸(é•¿xå®½xå¸§æ•°) |     å¡æ•° |  é‡‡æ ·æ­¥æ•° | å³°å€¼NPUå†…å­˜|   ç”Ÿæˆè€—æ—¶(s)  |
|:------------:|:------------:|:------------:|:------------:|:------------:|:------------:|
| T2V-1.3B   |      832x480x81 |  1   | 50    |  21GB    |  ~235   |
| T2V-14B   |        1280x720x81 |  1   |  50   |  52.2GB  | ~4650    |
| I2V-14B   |        832x480x81 |  1   |  40  |    50GB  | ~1150   |
| I2V-14B   |        1280x720x81 |  4   | 40  |     25GB    | ~1000        |

åˆ†æï¼š

- 1.3Bæ¨¡å‹èµ„æºå ç”¨ä½ï¼Œç”Ÿæˆé€Ÿåº¦å¿«ï¼Œé€‚åˆè½»é‡åº”ç”¨åœºæ™¯ã€‚
- 14Bæ¨¡å‹æ”¯æŒæ›´é«˜åˆ†è¾¨ç‡ï¼Œç”Ÿæˆè´¨é‡æ›´ä¼˜ï¼Œå¤šå¡å¹¶è¡Œå¯æ˜¾è‘—æå‡æ•ˆç‡ã€‚


## ç»“è¯­

æƒ³æŠŠè„‘æ´å˜æˆè§†é¢‘ï¼Ÿèµ¶ç´§å» MindOne GitHub ä¸‹è½½ä»£ç ï¼ŒåŠ¨æ‰‹è¯•è¯•å§ï¼æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€ï¼Œæˆ‘ä»¬ä¼šç¬¬ä¸€æ—¶é—´å¸®ä½ è§£ç­”ã€‚

> MindOneå¼€æºé“¾æ¥ï¼šhttps://github.com/mindspore-lab/mindone/tree/master/examples/wan2_1



